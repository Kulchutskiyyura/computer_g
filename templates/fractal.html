<html>
    <head>
        <title>My first program</title>
       
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
 </head>
 <body>
    <script>
        function send_ajax_teh(name, type)
        {
            console.log("ajax work")
        $.post(
            url = "http://127.0.0.1:5000/",
           
         {
            input_name: name,
            input_type: type
         }
        );
        }

    </script>
    <div class="container">
        
        <!-- Trigger the modal with a button -->
        <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Create Fractal</button>
      
        <!-- Modal -->
        <div class="modal fade" id="myModal" role="dialog">
          <div class="modal-dialog">
         
            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-body">
                <p>Some text in the modal.</p>
              </div>
              <form method="POST">
                <label for="power">X power</label>
                <input name="power" type="number" id="power">
                <label for="constant">Constant</label>
                <input name="constant" type="number" id="constant">
                <div class="modal-footer">
                    <input type="submit" value="ok">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Calcel</button>
                  </div>
            </form>
              
            </div>
            
          </div>
        </div>
        
      </div>
    <div class="grafic">
        <canvas id="myCanvas"></canvas>
        <legend for="myCanvas"></legend>
    </div>
    <script>
        function rgb(r, g, b){
            return "rgb("+r+","+g+","+b+")";
        }
        function drawPoint(x, y, label, color, size,context) {
      	if (color == null) {
        	color = '#123';
        }
      
        if (size == null) {
            size = 1;
        }
      
      	var radius = 0.5 * size;

      	// to increase smoothing for numbers with decimal part
		var pointX = Math.round(x - radius);
        var pointY = Math.round(y - radius);
  
        context.beginPath();
        context.fillStyle = color;
      	context.fillRect(pointX, pointY, size, size);
        context.fill();
      
      	
    }
    </script>
    <script>
   
        var myCanvas = document.getElementById("myCanvas");
        var context =  myCanvas.getContext('2d');
        myCanvas.width = 500;
        myCanvas.height = 500;
        colors={"0":[45,75,47],"1":[93,5,4],"2":[93,5,4]}
        var obj = {{json_obj}}
        console.log(obj)
        x=0
        y=0
        for(var i =0;i<obj[0].length;i++)
        {
        arr = [0,0,0]
        if(obj[0][i]!=-1)
        {
            arr = colors[obj[0][i]]
            arr[obj[0][i]] += obj[1][i]
            arr[0] += obj[1][i]
               
        }
        
        drawPoint(x,y,null,rgb(...arr),1,context);
        x++;
            if(x===500)
            {
                x=0;
                y++;
            }
        }

        
    </script>

  
 </body>
</html>
